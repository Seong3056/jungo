{% extends "base.html" %}
{% load humanize %}
{% block title %}상품 목록 - 비대면중고{% endblock %}

{% block content %}
<div class="container" style="display:flex;justify-content:space-between;align-items:center;">
  <h2 class="section-title" style="margin-left:0;">상품 목록</h2>
  {% if request.user.is_authenticated %}
    <a class="btn" href="{% url 'listing_create' %}">상품 등록</a>
  {% endif %}
</div>

<!-- ✅ 상품 목록을 일정한 크기의 그리드로 표시 -->
<div class="product-grid">
  {% for item in object_list %}
  <a href="{% url 'listing_detail' item.id %}" class="product-card">
    <div class="product-image">
      {% if item.image %}
        <img src="{{ item.image.url }}" alt="{{ item.title }}">
      {% else %}
        <div class="no-image">이미지 없음</div>
      {% endif %}
    </div>
    <div class="product-info">
      <h3>{{ item.title }}</h3>
      <p class="price">{{ item.price|intcomma }} 원</p>
      <p class="desc">{{ item.description|truncatechars:60 }}</p>
      <span class="status">{{ item.get_status_display }}</span>
    </div>
  </a>
  {% empty %}
  <div class="card glass">등록된 상품이 없습니다.</div>
  {% endfor %}
</div>
{% endblock %}
